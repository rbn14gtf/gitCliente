<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Ejercicio Cookies</title>
    </head>
    <body>
        <button id="verTodas">Ver Cookies</button>
        <button id="crearCookie">Crear Cookie</button>
        <button id="modificarCookie">Modificar Cookie</button>
        <button id="verCookie">Ver Cookie</button>
        <button id="borrarCookie">Borrar Cookie</button>
        <button id="borrarTodas">Delete All</button>

        <script>
            document.getElementById("verTodas").addEventListener("click",getAll)
            document.getElementById("crearCookie").addEventListener("click",setCookie)
            document.getElementById("modificarCookie").addEventListener("click",updateCookie)
            document.getElementById("verCookie").addEventListener("click",getCookie)
            document.getElementById("borrarCookie").addEventListener("click",deleteCookie)
            document.getElementById("borrarTodas").addEventListener("click",deleteAllCookies)

            function getAll(){
                alert(document.cookie)
            }
            function updateCookie(){
                let nombreCookie=String(prompt("Introduce el nombre de tu cookie","Nombre"))
                let valorCookie=String(prompt("Introduce el valor de la cookie "+nombreCookie,""))
                let duracion=Number(prompt("Introduce la duracion de la cookie "+nombreCookie,"2"))

                //pasar la fecha de hoy a milisegundos, sumarle la duracion en milisegundos

                document.cookie=nombreCookie+"="+valorCookie+";expires="+new Date((new Date().getTime())+duracionToMiliseconds(duracion)).toUTCString()+";"
                getAll()
            }
            function getCookie(){
                alert(document.cookie)
            }
            function duracionToMiliseconds(days){
                return days*1000 * 60 * 60 * 24 
            }
            function setCookie(){
                let nombreCookie=String(prompt("Introduce el nombre de tu cookie","Nombre"))
                let valorCookie=String(prompt("Introduce el valor de la cookie "+nombreCookie,"Ruben"))
                let duracion=Number(prompt("Introduce la duracion de la cookie "+nombreCookie,"2"))
                //pasar la fecha de hoy a milisegundos, sumarle la duracion en milisegundos

                document.cookie=nombreCookie+"="+valorCookie+";expires="+new Date((new Date().getTime())+duracionToMiliseconds(duracion)).toUTCString()+";"
                getAll()
            }
            function deleteCookie(){
                let nombreCookie=String(prompt("Introduce el nombre de tu cookie","Nombre"))
                document.cookie = nombreCookie+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
                getAll()
            }
            function deleteAllCookies() {
                const cookies = document.cookie.split(";");

                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i];
                    const eqPos = cookie.indexOf("=");
                    const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
                    document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
                }
            }
            
        </script>
    </body>
</html>