<!DOCTYPE html>
<html lang="es">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Ejercicio DOM 4.9</title>
      <style>
        div{
          border: 1px black solid;
          width: fit-content;
          padding: 10px;
          margin: 10px;
        }
        .eliminado{
          display: none;
        }
      </style>
  
</head>
  <body>
      <div id="elementos">Lista de la compra
        <ul id="list">
          <li onclick="eliminar(id)">Azucar</li>
          <li onclick="eliminar(id)">Cerveza</li>
          <li onclick="eliminar(id)">Pan</li>
          <li onclick="eliminar(id)">Patatas</li>
        </ul>
        <input id="inputAlimento" value="Kiwi">
        <button id="insertarAleatorio">Insertar Producto</button>

      </div>
      <script>
        window.onload=addId
        function addId(){
          let lista=document.getElementById("list").innerText.split("\n")
          document.getElementById("list").innerHTML=""
          for(let i=0;i<lista.length;i++){
            let nuevoLi=document.createElement("li")
              nuevoLi.innerHTML=lista[i]
              nuevoLi.id=i
              nuevoLi.setAttribute("onclick","eliminar(id)")
              document.getElementById("list").appendChild(nuevoLi)
          }
        }
        document.getElementById("insertarAleatorio").addEventListener("click",addAlimento)
        function addAlimento(){
          let lista=document.getElementById("list").innerText.split("\n")
          if(lista.includes(document.getElementById("inputAlimento").value)){
            alert("Ya existe este producto en tu lista de la compra")
          }else{
            document.getElementById("list").innerHTML=""
            lista.push(document.getElementById("inputAlimento").value)
            lista.sort()

            for(let i=0;i<lista.length;i++){
              let nuevoLi=document.createElement("li")
              nuevoLi.innerHTML=lista[i]
              nuevoLi.setAttribute("id",i)
              nuevoLi.setAttribute("onclick","eliminar(id)")
              document.getElementById("list").appendChild(nuevoLi)
            }
          }
        }
        function eliminar(id){
          document.getElementById(id).setAttribute("class","eliminado")
          
        }
      </script>
  </body>
</html>